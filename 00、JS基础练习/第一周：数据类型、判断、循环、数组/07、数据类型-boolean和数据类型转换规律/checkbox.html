<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
 </head>
 <body>
  <div class="checkBox">
	<div id="plante-input">
		<span>作物圈：</span>
		<input type="text" class="plan-input">
		<input type="reset" value="重置" class="plan-reset">
	</div>
	<div id="checkList">
		<label><input type="checkbox" data-name="2" data-title="苹果">苹果</label>
		<label><input type="checkbox" data-name="5" data-title="香蕉">香蕉</label>
		<label><input type="checkbox" data-name="8" data-title="梨子">梨子</label>
		<label><input type="checkbox" data-name="3" data-title="桔子">桔子</label>
	</div>




  </div>
  <script type="text/javascript">
	var oSetInput = document.querySelector("#plante-input .plan-input");
	var oReset = document.querySelector("#plante-input .plan-reset");
	var oCheck = document.querySelector("#checkList");
	var getInput = oCheck.querySelectorAll("label input");

	var ary = [];
	var aa=[1,3,5,4,3,3,1,4]
	function arr(arr) {
	  var result=[]
	  for(var i=0; i<arr.length; i++){
		if(result.indexOf(arr[i])==-1){
		  result.push(arr[i])
		}
	  }	  
	  oSetInput.value = result;
	}      
	

	for(var i = 0; i < getInput.length; i++){				
		getInput[i].onclick = function(){
			if(this.checked) {
				console.log("选中"+this);
				console.log("选中"+this.getAttribute("data-title"));
				ary.push(this.getAttribute("data-title"));
				arr(ary)

				console.log(ary);
			}else{
				var ind = ary.indexOf(this.getAttribute("data-title"));
				//console.log(oSetInput.value);
				console.log("未选中"+this.getAttribute("data-title"));
				console.log(ind);
								
			}                
		}
	}
  
  </script>
 </body>
</html>
